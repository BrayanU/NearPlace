import 'package:firebase_auth/firebase_auth.dart';
import 'package:flutter/material.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedRectangle7Widget4.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedStar1Widget7.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedNombreLugarWidget1.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedMapWidget4.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedLine1Widget4.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedEscribetureseaWidget.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedRectangle6Widget4.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedPinWidget8.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedLine3Widget4.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedPinWidget9.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedLine2Widget3.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedPinWidget10.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedOpcinWidget2.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedVectorWidget31.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedRectangle12Widget1.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedGroup24Widget.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedStar1Widget6.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedRectangle3Widget7.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedStar1Widget8.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedPinWidget11.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedStar1Widget9.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedGroup23Widget.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedStar1Widget5.dart';
import 'package:flutterapp/appmovilapp/generatedreviewviewwidget/generated/GeneratedGroupWidget2.dart';
import 'package:flutter_rating_bar/flutter_rating_bar.dart';
import 'package:cloud_firestore/cloud_firestore.dart';

/* Group iPhone XR, XS Max, 11 – 8
    Autogenerated by FlutLab FTF Generator
  */
class reviewForm {
  String text = "";
  double rate = 3;
}

class GeneratedIPhoneXRXSMax118Widget extends StatelessWidget {
  reviewForm rf = new reviewForm();
  CollectionReference ratings =
      FirebaseFirestore.instance.collection('ratings');
  FirebaseFirestore firestore = FirebaseFirestore.instance;

  Future<void> addRating(uid, rate, text) {
    print(rate);
    return ratings
        .add({"uid": (uid), "text": text.toString().trim(), "rate": (rate)})
        .then((value) => print("Rating added to db " + value.toString()))
        .catchError((error) => print("Failed to add Rating: $error"));
  }

  @override
  Widget build(BuildContext context) {
    return Container(
      width: 515.0,
      height: 959.0,
      child: Stack(
          fit: StackFit.expand,
          alignment: Alignment.center,
          overflow: Overflow.visible,
          children: [
            Positioned(
              left: 22.0,
              top: 12.0,
              right: null,
              bottom: null,
              width: 414.0,
              height: 896.0,
              child: GeneratedVectorWidget31(),
            ),
            Positioned(
              left: 0.0,
              top: 0.0,
              right: null,
              bottom: null,
              width: 459.0,
              height: 930.0,
              child: GeneratedRectangle3Widget7(),
            ),
            Positioned(
              left: 0.0,
              top: 69.0,
              right: null,
              bottom: null,
              width: 515.0,
              height: 890.0,
              child: GeneratedMapWidget4(),
            ),
            Positioned(
              left: 18.0,
              top: 12.0,
              right: null,
              bottom: null,
              width: 422.0,
              height: 81.0,
              child: GeneratedRectangle6Widget4(),
            ),
            Positioned(
              left: 352.0,
              top: 12.0,
              right: null,
              bottom: null,
              width: 84.0,
              height: 81.0,
              child: GeneratedRectangle7Widget4(),
            ),
            Positioned(
              left: 369.5,
              top: 32.5,
              right: null,
              bottom: null,
              width: 48.426998138427734,
              height: 0.0,
              child: GeneratedLine1Widget4(),
            ),
            Positioned(
              left: 369.5,
              top: 50.5,
              right: null,
              bottom: null,
              width: 48.426998138427734,
              height: 0.0,
              child: GeneratedLine2Widget3(),
            ),
            Positioned(
              left: 369.5,
              top: 68.5,
              right: null,
              bottom: null,
              width: 48.426998138427734,
              height: 0.0,
              child: GeneratedLine3Widget4(),
            ),
            Positioned(
              left: 61.0,
              top: 35.0,
              right: null,
              bottom: null,
              width: 96.0,
              height: 30.0,
              child: GeneratedOpcinWidget2(),
            ),
            Positioned(
              left: 109.0,
              top: 242.0,
              right: null,
              bottom: null,
              width: 31.388015747070312,
              height: 75.8479995727539,
              child: GeneratedPinWidget8(),
            ),
            Positioned(
              left: 179.0,
              top: 553.0,
              right: null,
              bottom: null,
              width: 31.388015747070312,
              height: 75.8479995727539,
              child: GeneratedPinWidget9(),
            ),
            Positioned(
              left: 315.0,
              top: 317.0,
              right: null,
              bottom: null,
              width: 31.388015747070312,
              height: 75.8479995727539,
              child: GeneratedPinWidget10(),
            ),
            Positioned(
              left: 267.0,
              top: 713.0,
              right: null,
              bottom: null,
              width: 31.388015747070312,
              height: 75.8479995727539,
              child: GeneratedPinWidget11(),
            ),
            Positioned(
              left: 56.0,
              top: 127.0,
              right: null,
              bottom: null,
              width: 347.0,
              height: 724.0,
              child: GeneratedGroupWidget2(),
            ),
            Positioned(
              left: 88.89399719238281,
              top: 185.0,
              right: null,
              bottom: null,
              width: 180.0,
              height: 35.0,
              child: GeneratedNombreLugarWidget1(),
            ),
            Positioned(
              left: 82.0,
              top: 258.0,
              right: null,
              bottom: null,
              width: 294.0,
              height: 256.0,
              child: TextField(
                maxLines: 10,
                decoration: InputDecoration(
                  border: OutlineInputBorder(
                      borderRadius: BorderRadius.circular(20.0)),
                  labelText: 'Escribe tu reseña',
                ),
                onChanged: (value) {
                  rf.text = value;
                },
              ),
            ),
            /* Positioned(
              left: 96.54499816894531,
              top: 270.0,
              right: null,
              bottom: null,
              width: 174.0,
              height: 25.0,
              child: GeneratedEscribetureseaWidget(),
            ), */
            Positioned(
              left: 77.0,
              top: 668.0,
              right: null,
              bottom: null,
              width: 271.0,
              height: 45.0,
              child: MaterialButton(
                child: GeneratedGroup23Widget(),
                onPressed: () async {
                  print(rf.text);
                  print(rf.rate);
                  print(FirebaseAuth.instance.currentUser.uid);
                  /* await addRating(
                      FirebaseAuth.instance.currentUser.uid, rf.rate, rf.text);
                   */ /* Navigator.pushNamed(
                      context, '/GeneratedDetailsplaceviewWidget'); */
                },
              ), //Crear
            ),
            Positioned(
              left: 94.0,
              top: 728.0,
              right: null,
              bottom: null,
              width: 271.0,
              height: 45.0,
              child: GeneratedGroup24Widget(),
            ),
            Positioned(
                top: 550,
                left: 110,
                child: RatingBar.builder(
                  initialRating: 3,
                  minRating: 0.5,
                  direction: Axis.horizontal,
                  allowHalfRating: true,
                  itemCount: 5,
                  itemPadding: EdgeInsets.symmetric(horizontal: 4.0),
                  itemBuilder: (context, _) => Icon(
                    Icons.star,
                    color: Colors.amber,
                  ),
                  onRatingUpdate: (rating) {
                    rf.rate = rating;
                    print(rating);
                  },
                )),
            /* Positioned(
              left: 89.00447082519531,
              top: 561.9993286132812,
              right: null,
              bottom: null,
              width: 48.28145217895508,
              height: 46.2801513671875,
              child: GeneratedStar1Widget5(),
            ),
            Positioned(
              left: 145.09747314453125,
              top: 561.9993286132812,
              right: null,
              bottom: null,
              width: 48.28145217895508,
              height: 46.2801513671875,
              child: GeneratedStar1Widget6(),
            ),
            Positioned(
              left: 201.19146728515625,
              top: 561.9993286132812,
              right: null,
              bottom: null,
              width: 48.28145217895508,
              height: 46.2801513671875,
              child: GeneratedStar1Widget7(),
            ),
            Positioned(
              left: 257.28448486328125,
              top: 561.9993286132812,
              right: null,
              bottom: null,
              width: 48.28145217895508,
              height: 46.2801513671875,
              child: GeneratedStar1Widget8(),
            ),
            Positioned(
              left: 313.37847900390625,
              top: 561.9993286132812,
              right: null,
              bottom: null,
              width: 48.28145217895508,
              height: 46.2801513671875,
              child: GeneratedStar1Widget9(),
            ) */
          ]),
    );
  }
}
